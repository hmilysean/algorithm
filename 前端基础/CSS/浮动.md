<style type="text/css">
        .container{
            width:250px;
            position: relative;
            border: solid #363636 4px;
            margin: 30px 30px 30px 0;
        }
        .fl{
            float: left;
        }
        .fr{
            float: right;
        }
        .box1{
            /*float: left;*/
            border: solid #363636 4px;
            background-color:#FFD700;
            width: 70px;
            height: 70px;
        }

        .box2{
            border: solid #363636 4px;
            background-color:#66CD00;
            width: 140px;
            height: 140px;
        }
        .clearfix:after{
            content:'.';
            display: block;
            height: 0;
            visibility: hidden;
            clear: both;
        }
        .container p{
            color:#333;
            font: 12px/1.5 Tahoma,Helvetica,Arial,'宋体',sans-serif;
        }
        .tag{
            position: absolute;
            bottom: 2px;
            left: 0;
            color:#666;
        }
</style>
    
# 浮动

## 基本概念

浮动属性为`float`，最初引入是为了实现文字环绕图片的简单布局，类似Word中的环绕布局，后来`float`不仅被用于浮动图片，也被用于浮动其他任何元素，从而可以使用`float`创建整个网站的布局。

`float`属性可以是元素向左或向右浮动，具体使用说明如下：

```
取值：left | right | none | inherit
初始值： none
应用于： 所有元素
继承性： 无
计算值： 根据指定确定
```

使用方法：

```html
<div style="float:left"></div>
```

## 浮动属性特点

感受下元素的浮动；

<div class="clearfix">
<div class="container fl">
    <div class="box1 fl"></div>
    <p>单框向左浮动，文本环绕在左右，浮动元素不会超过父元素的左边界，顶端不会超过父元素顶端。单框向左浮动，文本环绕在左右，浮动元素不会超过父元素的左边界，顶端不会超过父元素顶端。</p>
</div>

<div class="container fl">
    <div class="box1 fl"></div>
    <div class="box2 fl"></div>
    <p>两框都向左浮动，绿框按照顺序排在黄框后，文字仍然环绕左右</p>
</div>

<div class="container fl">
    <div class="box2 fl"></div>
    <p>两框都向左浮动，由于段落元素在两个框元素的中间，因此会先渲染文字。在此基础上，黄框会选择尽可能高的位置浮动。</p>
    <div class="box1 fl"></div>
</div>

<div class="container fl">
    <div class="box1 fl"></div>
    <div class="box2 fl"></div>
    <div class="box1 fl"></div>
    <p>三框都向左浮动，依次显示，段落元素在最后。第二个黄框被挤到下面来，文本元素仍然环绕</p>
</div>

<div class="container fl">
    <div class="box1 fl"></div>
    <div class="box2 fl"></div>
    <div class="box2 fl"></div>
    <p>如果浮动元素太大，会超出父元素的边界。</p>
</div>
</div>


### 浮动带来的副作用

浮动会让元素脱离文档流，不再影响不浮动的元素，实则不然。浮动不再占据文档流的位置，也使浮动元素周围的元素表现的如同浮动元素不存在一样，给布局带来了一些副作用。

* 块状元素，会钻进浮动元素的下面，被浮动元素所覆盖；

```css
        .container{
            width:250px;
            position: relative;
            border: solid #363636 4px;
            margin: 30px 30px 30px 0;
        }
        .fl{
            float: left;
        }
        .fr{
            float: right;
        }
        .box1{
            /*float: left;*/
            border: solid #363636 4px;
            background-color:#FFD700;
            width: 70px;
            height: 70px;
        }

        .box2{
            border: solid #363636 4px;
            background-color:#66CD00;
            width: 140px;
            height: 140px;
        }
```

```html
<div class= " container fl">
    <div class="box1 "></div>
    <div class="box2 "></div>
</div>
<div class="container fl ">
    <div class="box1  fl"></div>
    <div class="box2 "></div>
</div>
```


<div class="clearfix">
    <div class= " container fl">
        <div class="box1 "></div>
        <div class="box2 "></div>
        <span class="tag " style="position:absolute; bottom:-30px">浮动前
    </div>
    <div class="container fl ">
        <div class="box1  fl"></div>
        <div class="box2 "></div>
        <span class="tag " style="position:absolute; top:240px">浮动后
    </div>
</div>

* 行内元素，例如文字， 则会环绕在浮动元素的周围，为浮动元素留出空间；

```css
.container p{
    color:#333;
    font: 12px/1.5 Tahoma,Helvetica,Arial,'宋体',sans-serif;
}
```

```html
<div class= " container fl">
    <div class="box1 "></div>
    <p >码蜂社前端学习社区，生命不息，折腾不止。码蜂社前端学习社区，生命不息，折腾不止。码蜂社前端学习社区，生命不息，折腾不止。
    </p>
</div>
<div class="container fl ">
    <div class="box1 fl "></div>
    <p >码蜂社前端学习社区，生命不息，折腾不止。码蜂社前端学习社区，生命不息，折腾不止。码蜂社前端学习社区，生命不息，折腾不止。
    </p>
</div>
```
<div class="clearfix">
    <div class= " container fl">
        <div class="box1 "></div>
        <p >码蜂社前端学习社区，生命不息，折腾不止。码蜂社前端学习社区，生命不息，折腾不止。码蜂社前端学习社区，生命不息，折腾不止。</p>
        <span class="tag " style="position:absolute; bottom:-30px ">浮动前
    </div>
    <div class="container fl ">
        <div class="box1 fl "></div>
        <p >码蜂社前端学习社区，生命不息，折腾不止。码蜂社前端学习社区，生命不息，折腾不止。码蜂社前端学习社区，生命不息，折腾不止。</p>
        <span class="tag " style="position:absolute; top:160px">浮动后
    </div>
</div>

* 浮动元素的父元素坍缩；

```html
<div class="container">
    <div class="box1  "></div>
    <div class="box2  "></div>
</div>
<div class="container">
    <div class="box1  fl"></div>
    <div class="box2  fr"></div>
</div>
```

<div class="clearfix">
    <div class="fl"  style="
            margin: 30px 30px 30px 0;position: relative;" >
        <div  style="width: 250px; border: solid #363636 4px;">
            <div class="box1  "></div>
            <div class="box2  "></div>
        </div>
        <span class="tag " style="position:absolute; top:220px">浮动前</span>
    </div>
    <div class="fl"  style="
            margin: 30px 30px 30px 0; position: relative;" >
        <div  style="width: 250px; border: solid #363636 4px;">
            <div class="box1  fl"></div>
            <div class="box2  fr"></div>
        </div>
        <span class="tag " style="position:absolute; top:220px">浮动后</span>
    </div>
</div>

如果我们能够为浮动元素留出垂直空间，则这些副作用都会消失，这就是清除浮动。

### 如何清除浮动

浮动元素脱离了文档流，不影响周围的元素，因此清除浮动实际上是为前面的浮动元素留出足够的垂直空间。

#### `clear`属性

`clear`属性的值可以是`left`、`right`、`both`或者`none`,含义是表示框的哪些边不应该挨着浮动框。`clear`元素应该作用在谁身上？

1.作用在浮动元素后禁止浮动的第一个元素上。

```html
<div class="container fl ">
    <div class="box1  fl"></div>
    <div class="box2 " style="clear: both"></div>
</div>
```

2.如果浮动元素之后没有元素,则添加一个空元素，并对空元素清除浮动。

添加空元素常用的有两种方式，一种是直接添加，另一种是通过伪类添加。

* 直接添加

```css
<div class="container">
    <div class="box1  fl"></div>
    <div class="box2  fr"></div>
    <div style="clear:both"></div>
</div>
```

效果

<div class="container">
    <div class="box1  fl"></div>
    <div class="box2  fr"></div>
    <div style="clear:both"></div>
</div>

* 通过伪类添加


```css
.clearfix{
    *zoom:1;
}
.clearfix:after{
    content:".";
    display:block;
    height:0;
    visibility:hidden;
    clear:left;
}
```
 
 
```css
.clearfix{
    *zoom:1;
}
.clearfix:after{
    content:"";
    display:table;
    clear:both;
}
```


```html
<div class="container clearfix">
    <div class="box1  fl"></div>
    <div class="box2  fr"></div>
</div>
```


#### BFC 清理浮动

```
补充知识：BFC(Block Formatting Contexts)

BFC(Block Formatting Contexts)直译为"块级格式化上下文"，是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素。

BFC 有三个特性：
    1. BFC会阻止垂直外边距（margin-top、margin-bottom）折叠。
    2. BFC不会重叠浮动元素。
    3. BFC可以包含浮动。
  __注__：利用第一条特性可以防止外边距合并，利用第三条特性可以达到“清除浮动”的目的。

触发BFC的方式：

1.  float 为 left|right
2.  overflow 为 hidden|auto|scroll
3.  display 为 table-cell|table-caption|inline-block
4.  position 为 absolute|fixed
```

利用第三条特征，只要浮动元素的父容器形成BFC，浮动元素就会被包含在父元素内，从而解决父元素塌陷的效果，后续元素也不会受到浮动元素的影响，从而达到清除浮动的效果。

 ##### BFC清除浮动有什么副作用？
 
1. `float`为 `left`|`right`

将父元素设置成浮动，从而清除子元素的浮动。副作用是父元素变成浮动元素了，难道要整个布局都浮动？虽然有助于减少或消除不必要的标记，但浮动会变得很复杂，一些老式浏览器在处理有许多浮动元素的布局时有困难。

2. `overflow`为 `hidden`|`auto`|`scroll`

在某些情况下会产生滚动条或截断内容的现象。

3.  `display`为 `table-cell`|`table-caption`|`inline-block`

无法兼容低版本IE。

4.  `position`为 `absolute`|`fixed`

改变了元素的定位方法，如果定位方式不是我们需要的，则会很麻烦。































## 基本概念

首先介绍一些浮动模型的基本知识：浮动模型也是一种可视化格式模型，浮动的框可以左右移动（根据float属性值而定），直到它的外边缘碰到包含框或者另一个浮动元素的框的边缘。浮动元素不在文档的普通流中，文档的普通流中的元素表现的就像浮动元素不存在一样.《CSS Mastery》里作者画了几个图非常有意思，可以帮助我们理解浮动的表现，我简单的画几个

**正常**

```
<div style="border: solid 5px #0e0; width:300px;">
    <div style="height: 100px; width: 100px; background-color: Red;">
    </div>
    <div style="height: 100px; width: 100px; background-color: Green; ">
    </div>
    <div style="height: 100px; width: 100px; background-color: Yellow;">
    </div>
</div>

```

**红向右浮动**

```
<div style="border: solid 5px #0e0; width:300px;">
    <div style="height: 100px; width: 100px; background-color: Red; float:right;">
    </div>
    <div style="height: 100px; width: 100px; background-color: Green; ">
    </div>
    <div style="height: 100px; width: 100px; background-color: Yellow;">
    </div>
</div>

```

**红框左移,覆盖绿框**

```
<div style="border: solid 5px #0e0; width:300px;">
    <div style="height: 100px; width: 100px; background-color: Red;  float:left;">
    </div>
    <div style="height: 100px; width: 100px; background-color: Green;">
    </div>
    <div style="height: 100px; width: 100px; background-color: Yellow;">
    </div>
</div>

```

**都向左浮动,父元素宽度为0**

```
<div style="border: solid 5px #0e0; width:300px;">
    <div style="height: 100px; width: 100px; background-color: Red;  float:left;">
    </div>
    <div style="height: 100px; width: 100px; background-color: Green;  float:left;">
    </div>
    <div style="height: 100px; width: 100px; background-color: Yellow;  float:left;">
    </div>
</div>

```

如果包含块儿太窄无法容纳水平排列的三个浮动元素,那么其它浮动块儿向下移动,直到有足够的空间,如果浮动元素的高度不同,那么向下移动的时候可能被卡住

**没有足够水平空间**

```
<div style="border: solid 5px #0e0; width:250px;">
    <div style="height: 100px; width: 100px; background-color: Red;  float:left;">
    </div>
    <div style="height: 100px; width: 100px; background-color: Green;  float:left;">
    </div>
    <div style="height: 100px; width: 100px; background-color: Yellow;  float:left;">
    </div>
</div>

```

**卡住了**

```
<div style="border: solid 5px #0e0; width:250px;">
    <div style="height: 120px; width: 100px; background-color: Red;  float:left;">
    </div>
    <div style="height: 100px; width: 100px; background-color: Green;  float:left;">
    </div>
    <div style="height: 100px; width: 100px; background-color: Yellow;  float:left;">
    </div>
</div>

```

## 行框

前面指出浮动会让元素脱离文档流,不影响不浮动元素.实际上并不完全如此,如果浮动的元素后面有一个文档流中元素,那么这个元素的框会表现的像浮动元素不存在,但是框的文本内容会受到浮动元素的影响,会移动以留出空间.用术语说就是浮动元素旁边的行框被缩短,从而给浮动元素流出空间,因而行框围绕浮动框

**不浮动**

```
<div style="border: solid 5px #0e0; width: 250px;">
    <div style="height: 50px; width: 50px; background-color: Red;"></div>
    <div style="height: 100px; width: 100px; background-color: Green;">
       11111111111
       11111111111
    </div>
</div>

```

<div style="border: solid 5px #0e0; width: 250px;">

<div style="height: 100px; width: 100px; background-color: Green;">11111111111 11111111111</div>

</div>

**浮动**

```
<div style="border: solid 5px #0e0; width: 250px;">
    <div style="height: 50px; width: 50px; background-color: Red; float:left;"></div>
    <div style="height: 100px; width: 100px; background-color: Green;">
       abc def ghi
       abc def ghi
       abc def ghi
    </div>
</div>

```

<div style="border: solid 5px #0e0; width: 250px;">

<div style="height: 100px; width: 100px; background-color: Green;">abc def ghi abc def ghi abc def ghi</div>

</div>

可以看出浮动后虽然绿色div布局不受浮动影响，正常布局，但是文字部分却被挤到了红色浮动div外边。要想阻止行框围绕在浮动元素外边，可以使用`clear`属性，属性的left，right，both，none表示框的哪些边不挨着浮动框

```
<div style="border: solid 5px #0e0; width: 250px;">
    <div style="height: 50px; width: 50px; background-color: Red; float:left;"></div>
    <div style="height: 100px; width: 100px; background-color: Green; clear:both;">
       11111111111
       11111111111
    </div>
</div>

```

<div style="border: solid 5px #0e0; width: 250px;">

<div style="height: 100px; width: 100px; background-color: Green; clear:both;">11111111111 11111111111</div>

</div>

## 清理浮动

对元素清理实际上为前面的浮动元素留出了垂直空间,这样可以解决我们之前的一个问题，看前面的图片的时候我们发现div内的所有元素浮动的话就会不占据文档空间，这样父元素，高度为0，可能很多效果也不见了

**都向左浮动,父元素宽度为0**

```
<div style="border: solid 5px #0e0; width:300px;">
    <div style="height: 100px; width: 100px; background-color: Red;  float:left;">
    </div>
    <div style="height: 100px; width: 100px; background-color: Green;  float:left;">
    </div>
    <div style="height: 100px; width: 100px; background-color: Yellow;  float:left;">
    </div>
</div>

```

如果我们想让父元素在视觉上包围浮动元素可以像下面这样处理,在最后添加一个空div，对它清理

```
<div style="border: solid 5px #0e0; width:300px;">
    <div style="height: 100px; width: 100px; background-color: Red;  float:left;">
    </div>
    <div style="height: 100px; width: 100px; background-color: Green;  float:left;">
    </div>
    <div style="height: 100px; width: 100px; background-color: Yellow;  float:left;">
    </div>
    <div style="clear:both;"></div>
</div>

```

当然这样做有很多缺点，有些javascript也可以做出类似效果，这里不细说，值得注意的是应用值为hidden或auto的overflow属性会有一个副作用：自动清理包含的任何浮动元素，所以说当页面出现相关问题时，可以看看是不是这个属性搞的鬼

## BFC清理浮动

BFC的全称是 [Block Format Content](http://www.w3.org/TR/CSS21/visuren.html#block-formatting)，有三个特性

*   BFC会阻止垂直外边距（margin-top、margin-bottom）折叠

    > 按照BFC的定义，只有同属于一个BFC时，两个元素才有可能发生垂直Margin的重叠，这个包括相邻元素，嵌套元素，只要他们之间没有阻挡(例如边框，非空内容，padding等)就会发生margin重叠。 因此要解决margin重叠问题，只要让它们不在同一个BFC就行了，但是对于两个相邻元素来说，意义不大，没有必要给它们加个外壳，但是对于嵌套元素来说就很有必要了，只要把父元素设为BFC就可以了。这样子元素的margin就不会和父元素的margin发生重叠

*   BFC不会重叠浮动元素

*   BFC可以包含浮动

我们可以利用BFC的第三条特性来“清浮动”，这里其实说清浮动已经不再合适，应该说包含浮动。也就是说只要父容器形成BFC就可以，简单看看如何形成BFC

*   `float`为 left|right
*   `overflow`为 hidden|auto|scroll
*   `display`为 table-cell|table-caption|inline-block
*   `position`为 absolute|fixed

我们可以对父容器添加这些属性来形成BFC达到“清浮动”效果

### 局限性

上面提到使用BFC使用float的时候会使父容器长度缩短，而且还有个重要缺陷——父容器float解决了其塌陷问题，那么父容器的父容器怎么办？难道要全部使用folat吗（确实有这种布局方式倒是）。BFC的几种方式都有各自的问题，overflow属性会影响滚动条和绝对定位的元素；position会改变元素的定位方式，这是我们不希望的，display这几种方式依然没有解决低版本IE问题。。。

### hasLayout

我们知道在IE6、7内有个`hasLayout`的概念，很多bug正是由hasLayout导致的

*   当元素的hasLayout属性值为false的时候，元素的尺寸和位置由最近拥有布局的祖先元素控制
*   当元素的hasLayout属性值为true的时候会达到和BFC类似的效果，元素负责本身及其子元素的尺寸设置和定位

我们可以利用这点儿在IE6、7下完成清浮动，先看看怎么使元素hasLayout为true

*   `position`: absolute
*   `float`: left|right
*   `display`: inline-block
*   `width`: 除 “auto” 外的任意值
*   `height`: 除 “auto” 外的任意值
*   `zoom`: 除 “normal” 外的任意值
*   `writing-mode`: tb-rl
*   在IE7中使用`overflow`: hidden|scroll|auto 也可以使hasLayout为true

## 通用的清理浮动法案

```
.clearfix{
    *zoom:1;
}
.clearfix:after{
    content:".";
    display:block;
    height:0;
    visibility:hidden;
    clear:left;
}

```

```
.clearfix{
    *zoom:1;
}
.clearfix:after{
    content:"";
    display:table;
    clear:both;
}

```

## 两种方案

虽然我们得出了一种浏览器兼容的靠谱解决方案，但这并不代表我们一定得用这种方式，很多时候我们的父容器本身需要`position：absolute`等形成了BFC的时候我们可以直接利用这些属性了，大家要掌握原理，活学活用。总而言之清理浮动两种方式

1.  利用 clear属性，清除浮动
2.  使父容器形成BFC